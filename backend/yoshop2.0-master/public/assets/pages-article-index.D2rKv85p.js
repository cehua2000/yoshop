import{_ as t}from"./u-tabs.OeK_Loi0.js";import{$ as e,m as a,p as s,q as i,c as l,w as o,n as r,i as c,o as n,a as d,b as m,d as u,F as h,k as p,f as _,t as g,e as f,l as y,g as b}from"./index-BR_epvkd.js";import{r as L}from"./uni-app.es.Cu0rwAi-.js";import{M as w,_ as T}from"./mescroll-mixins.nOOeBu6g.js";import{l as I}from"./index.zzjOKI4w.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x="article.category/list";const C=v({mixins:[w],data:()=>({tabList:[],curTab:0,categoryId:0,articleList:a(),upOption:{auto:!0,page:{size:15},noMoreSize:3}}),onLoad(t){this.categoryId=t.categoryId||0,this.getCategoryList()},methods:{upCallback(t){const e=this;e.getArticleList(t.num).then((t=>{const a=t.data.length,s=t.total;e.mescroll.endBySize(a,s)})).catch((()=>e.mescroll.endErr()))},getCategoryList(){e.get(x).then((t=>{this.setTabList(t.data.list)}))},setTabList(t){const e=this;if(e.tabList=[{value:0,name:"全部"}],t.forEach((t=>{e.tabList.push({value:t.category_id,name:t.name})})),e.categoryId>0){const t=e.tabList.findIndex((t=>t.value==e.categoryId));e.curTab=t>-1?t:0}},getArticleList(t=1){const e=this;return new Promise(((a,i)=>{I({categoryId:e.categoryId,page:t},{load:!1}).then((i=>{const l=i.data.list;e.articleList.data=s(l,e.articleList,t),a(l)})).catch(i)}))},onChangeTab(t){this.curTab=t,this.categoryId=this.tabList[t].value,this.onRefreshList()},onRefreshList(){this.articleList=a(),setTimeout((()=>this.mescroll.resetUpScroll()),120)},onTargetDetail(t){this.$navTo("pages/article/detail",{articleId:t})}},onShareAppMessage(){return{title:"文章首页",path:"/pages/article/index?"+this.$getShareUrlParams()}},onShareTimeline(){return{title:"文章首页",path:"/pages/article/index?"+this.$getShareUrlParams()}}},[["render",function(e,a,s,w,I,v){const x=L(i("u-tabs"),t),C=y,k=c,S=b,j=L(i("mescroll-body"),T);return n(),l(k,{class:"container",style:r(e.appThemeStyle)},{default:o((()=>[d(j,{ref:"mescrollRef",sticky:!0,onInit:e.mescrollInit,down:{use:!1},up:I.upOption,onUp:v.upCallback},{default:o((()=>[d(x,{list:I.tabList,"is-scroll":!0,modelValue:I.curTab,"onUpdate:modelValue":a[0]||(a[0]=t=>I.curTab=t),"active-color":e.appTheme.mainBg,duration:.2,onChange:v.onChangeTab},null,8,["list","modelValue","active-color","onChange"]),d(k,{class:"article-list"},{default:o((()=>[(n(!0),m(h,null,u(I.articleList.data,((t,e)=>(n(),l(k,{class:p(["article-item",[`show-type__${t.show_type}`]]),key:e,onClick:e=>v.onTargetDetail(t.article_id)},{default:o((()=>[10==t.show_type?(n(),m(h,{key:0},[d(k,{class:"article-item__left flex-box"},{default:o((()=>[d(k,{class:"article-item__title"},{default:o((()=>[d(C,{class:"twoline-hide"},{default:o((()=>[_(g(t.title),1)])),_:2},1024)])),_:2},1024),d(k,{class:"article-item__footer m-top10"},{default:o((()=>[d(C,{class:"article-views f-24 col-8"},{default:o((()=>[_(g(t.show_views)+"次浏览",1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(k,{class:"article-item__image"},{default:o((()=>[d(S,{class:"image",mode:"widthFix",src:t.image_url},null,8,["src"])])),_:2},1024)],64)):f("",!0),20==t.show_type?(n(),m(h,{key:1},[d(k,{class:"article-item__title"},{default:o((()=>[d(C,{class:"twoline-hide"},{default:o((()=>[_(g(t.title),1)])),_:2},1024)])),_:2},1024),d(k,{class:"article-item__image m-top20"},{default:o((()=>[d(S,{class:"image",mode:"widthFix",src:t.image_url},null,8,["src"])])),_:2},1024),d(k,{class:"article-item__footer m-top10"},{default:o((()=>[d(C,{class:"article-views f-24 col-8"},{default:o((()=>[_(g(t.show_views)+"次浏览",1)])),_:2},1024)])),_:2},1024)],64)):f("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1},8,["onInit","up","onUp"])])),_:1},8,["style"])}],["__scopeId","data-v-83d20982"]]);export{C as default};
