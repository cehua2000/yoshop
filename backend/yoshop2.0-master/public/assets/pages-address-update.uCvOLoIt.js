import{q as e,c as a,w as r,n as o,i as l,o as t,a as s,f as i,k as d}from"./index-BR_epvkd.js";import{a as n,_ as m,b as u}from"./u-form.Blyi1HZL.js";import{r as p}from"./uni-app.es.Cu0rwAi-.js";import{_ as f}from"./select-region.Cr9YYAOh.js";import{a as g}from"./verify.Dz7mnHVd.js";import{b as c,e as h}from"./address.Tfe_ZZIe.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.DIMPaE6q.js";import"./emitter.DrjJCwnj.js";import"./u-loading.BOZG1sHe.js";import"./u-popup.DYU41LT0.js";const _={name:[{required:!0,message:"请输入姓名",trigger:["blur","change"]}],phone:[{required:!0,message:"请输入手机号",trigger:["blur","change"]},{validator:(e,a,r)=>g(a),message:"手机号码不正确",trigger:["blur"]}],region:[{required:!0,message:"请选择省市区",trigger:["blur","change"],type:"array"}],detail:[{required:!0,message:"请输入详细地址",trigger:["blur","change"]}]};const v=b({components:{SelectRegion:f},data:()=>({form:{content:"",name:"",phone:"",region:[],detail:""},rules:_,isLoading:!0,disabled:!1,addressId:null}),onLoad({addressId:e}){this.addressId=e,this.getDetail()},onReady(){this.$refs.uForm.setRules(this.rules)},methods:{getDetail(){const e=this;c(e.addressId).then((a=>{const r=a.data.detail;e.createFormData(r)}))},createFormData(e){const{form:a}=this;a.name=e.name,a.phone=e.phone,a.detail=e.detail,a.region=this.createRegion(e)},createRegion(e){return 0==e.province_id||0==e.city_id||0==e.region_id?(this.$toast("很抱歉，地区未能识别请手动选择",2e3),[]):[{label:e.region.province,value:e.province_id},{label:e.region.city,value:e.city_id},{label:e.region.region,value:e.region_id}]},handleSubmit(){const e=this;if(e.disabled)return!1;e.$refs.uForm.validate((a=>{a&&(e.disabled=!0,h(e.addressId,e.form).then((a=>{e.$toast(a.message),uni.navigateBack()})).finally((()=>e.disabled=!1)))}))}}},[["render",function(g,c,h,b,_,v){const V=l,j=p(e("u-input"),n),y=p(e("u-form-item"),m),F=p(e("select-region"),f),I=p(e("u-form"),u);return t(),a(V,{class:"container",style:o(g.appThemeStyle)},{default:r((()=>[s(V,{class:"page-title"},{default:r((()=>[i("收货地址")])),_:1}),s(V,{class:"form-wrapper"},{default:r((()=>[s(I,{model:_.form,ref:"uForm","label-width":"140rpx"},{default:r((()=>[s(y,{label:"姓名",prop:"name"},{default:r((()=>[s(j,{modelValue:_.form.name,"onUpdate:modelValue":c[0]||(c[0]=e=>_.form.name=e),placeholder:"请输入收货人姓名"},null,8,["modelValue"])])),_:1}),s(y,{label:"电话",prop:"phone"},{default:r((()=>[s(j,{modelValue:_.form.phone,"onUpdate:modelValue":c[1]||(c[1]=e=>_.form.phone=e),placeholder:"请输入收货人手机号"},null,8,["modelValue"])])),_:1}),s(y,{label:"地区",prop:"region"},{default:r((()=>[s(F,{ref:"sRegion",modelValue:_.form.region,"onUpdate:modelValue":c[2]||(c[2]=e=>_.form.region=e)},null,8,["modelValue"])])),_:1}),s(y,{label:"详细地址",prop:"detail","border-bottom":!1},{default:r((()=>[s(j,{modelValue:_.form.detail,"onUpdate:modelValue":c[3]||(c[3]=e=>_.form.detail=e),placeholder:"街道门牌、楼层等信息"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1}),s(V,{class:"footer"},{default:r((()=>[s(V,{class:"btn-wrapper"},{default:r((()=>[s(V,{class:d(["btn-item btn-item-main",{disabled:_.disabled}]),onClick:c[4]||(c[4]=e=>v.handleSubmit())},{default:r((()=>[i("保存")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1},8,["style"])}],["__scopeId","data-v-73f743a8"]]);export{v as default};
